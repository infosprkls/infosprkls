(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"9r5n":function(e,t,s){(t=e.exports=s("I1BE")(!1)).push([e.i,"@import url(/css/pages/_settings.css);",""]),t.push([e.i,"@import url(/css/components/_modal.css);",""]),t.push([e.i,"\n",""])},GH6k:function(e,t,s){"use strict";s.r(t);var a=s("XuX8"),i=s.n(a),n=s("e7F3"),r=s("7i12"),l=s.n(r),o=(s("/v78"),s("AsZ1")),c=s.n(o),d=s("OxYv"),m=s.n(d);i.a.use(n.a),l.a.use(c.a),i.a.use(l.a),l.a.lang.use("en-US",m.a);var p={props:["user"],components:{},data:function(){return{showEmailForm:!0,droptext:"Site Specific setting",showGrowlMessage:!1,growlMessagefirst:"",growlMessageSecond:"",growlMessageType:"",emailContent:"",receiverEmail:"",emailTitle:"",customTabs:4,settingsData:[],editerText:"",editerKey:"",settingId:"",settingIndex:"",sendEmailModel:!1}},methods:{showGrowlMessageComponent:function(){var e=this;this.showGrowlMessage=!1,this.$nextTick((function(){e.showGrowlMessage=!0}))},sendEmail:function(){var e=this;this.$validator.validateAll().then((function(t){if(t){e.sendEmailModel=!0;var s=new FormData;s.append("emailContent",e.emailContent),s.append("receiverEmail",e.receiverEmail),s.append("emailTitle",e.emailTitle),axios.post("/admin/send/email",s,{headers:{"Content-Type":"multipart/form-data",pageType:"api"}}).then((function(t){"Success"==t.data.status?(e.growlMessagefirst="Success",e.growlMessageSecond=t.data.message,e.growlMessageType="success",e.showGrowlMessageComponent(),e.sendEmailModel=!1,e.emailContent="",e.receiverEmail="",e.emailTitle="",e.showEmailForm=!1,e.$nextTick((function(){e.showEmailForm=!0}))):(e.growlMessagefirst="Failure",e.growlMessageSecond=t.data.message,e.growlMessageType="danger",e.showGrowlMessageComponent(),e.sendEmailModel=!1)}))}})).catch((function(e){console.log(e)}))},showModel:function(e,t,s,a){this.settingId=e,this.settingIndex=t,this.editerText=a,this.editerKey=s,this.$refs["my-modal"].show()},showPreviewModel:function(e,t,s,a){},hideModal:function(){this.$refs["my-modal"].hide(),this.$refs["my-preview-modal"].hide()},adminGetSettings:function(){var e=this;axios.get("admin/get/settings",{headers:{}}).then((function(t){e.settingsData=t.data.data}))},adminUpdateSetting:function(){var e=this;if(this.editerText&&this.editerKey&&this.settingId){var t=new FormData;t.append("setting_value",this.editerText),t.append("setting_id",this.settingId),axios.post("/admin/update/settings",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){"Success"==t.data.status?(e.settingsData[e.settingIndex].setting_value=e.editerText,e.$refs["my-modal"].hide()):(t.data.error&&t.data.error.setting_id&&alert(t.data.error.setting_id[0]),t.data.error&&t.data.error.setting_value&&alert(t.data.error.setting_value[0]))}))}}},mounted:function(){},watch:{},created:function(){this.adminGetSettings()}},v=(s("Mh8x"),s("KHd+")),u=Object(v.a)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("div",{staticClass:"inner-content"},[s("section",[s("b-container",{attrs:{fluid:""}},[s("b-row",{staticClass:"m-0"},[s("b-col",[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header card-header-primary d-flex flex-wrap align-items-center"},[s("div",{staticClass:"content-card-left"},[s("h4",{staticClass:"card-title text-white"},[e._v("Settings")])]),e._v(" "),s("div",{staticClass:"horizontal-tabs"},[s("ul",{staticClass:"list-unstyled mb-0"},[s("li",{staticClass:"dropdown-custom"},[s("b-dropdown",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"#cd92d7",startingOpacity:1,easing:"linear"},expression:"{color: '#cd92d7', startingOpacity: 1, easing: 'linear'}"}],attrs:{variant:"link","toggle-class":"text-decoration-none m-0 p-0 border-0"},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("div",{staticClass:"d-flex align-items-center button-dropdown",class:{active:1==e.customTabs||1.2==e.customTabs},on:{click:function(t){e.droptext="Site Specific setting",e.customTabs=1}}},[s("i",{staticClass:"material-icons mr-2"},[e._v("perm_data_setting")]),e._v(e._s(e.droptext)+"\n                                                        ")])]},proxy:!0}])},[e._v(" "),s("b-dropdown-item",{class:["Site Specific setting"==e.droptext?"active":""],attrs:{href:"#"},on:{click:function(t){e.droptext="Site Specific setting",e.customTabs=1}}},[e._v("Site Specific setting ")]),e._v(" "),s("b-dropdown-divider",{staticClass:"w-100"}),e._v(" "),s("b-dropdown-item",{class:["Email Templates"==e.droptext?"active":""],attrs:{href:"#"},on:{click:function(t){e.droptext="Email Templates",e.customTabs=1.2}}},[e._v("Email Templates")])],1)],1),e._v(" "),s("li",[s("a",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"#cd92d7",startingOpacity:1,easing:"linear"},expression:"{color: '#cd92d7', startingOpacity: 1, easing: 'linear'}"}],staticClass:"d-flex flex-wrap align-items-center",class:{active:2==e.customTabs},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.customTabs=2}}},[s("i",{staticClass:"material-icons mr-2"},[e._v("engineering")]),e._v("\n                                                User specific settings\n                                                ")])]),e._v(" "),s("li",[s("a",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"#cd92d7",startingOpacity:1,easing:"linear"},expression:"{color: '#cd92d7', startingOpacity: 1, easing: 'linear'}"}],staticClass:"d-flex flex-wrap align-items-center",class:{active:3==e.customTabs},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.customTabs=3}}},[s("i",{staticClass:"material-icons mr-2"},[e._v("dashboard")]),e._v("\n                                                Company Specific Dashboard\n                                                ")])]),e._v(" "),s("li",[s("a",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"#cd92d7",startingOpacity:1,easing:"linear"},expression:"{color: '#cd92d7', startingOpacity: 1, easing: 'linear'}"}],staticClass:"d-flex flex-wrap align-items-center",class:{active:4==e.customTabs},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.customTabs=4}}},[s("i",{staticClass:"material-icons mr-2"},[e._v("article")]),e._v("\n                                                Site Specifics Documents\n                                                ")])])])])]),e._v(" "),s("div",{staticClass:"card-body"},[1==e.customTabs?s("b-form",[s("p",[e._v("Site Specific setting")])]):e._e(),e._v(" "),1.2==e.customTabs?s("section",[e.showEmailForm?s("section",{staticClass:"via-content"},[s("div",{staticClass:"service-header d-flex flex-wrap align-items-center"},[s("h2",{staticClass:"mb-0"},[e._v("Email Templates")])]),e._v(" "),s("div",{staticClass:"service-body"},[s("b-form",{staticClass:"custom-form"},[s("b-form-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{cols:"12"}},[s("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.emailContent,expression:"emailContent"}],staticClass:"form-control mw-100",attrs:{name:"content",rows:"10",placeholder:""},domProps:{value:e.emailContent},on:{input:function(t){t.target.composing||(e.emailContent=t.target.value)}}}),e._v(" "),e.errors.has("content")?s("p",{staticClass:"invalid-message mb-0 pt-2"},[e._v("\n                                                                "+e._s(e.errors.first("content"))+"\n                                                            ")]):e._e()]),e._v(" "),s("b-col",{staticClass:"mt-5",attrs:{cols:"12"}},[s("b-form-group",[s("label",{staticClass:"mb-0 w-100",attrs:{for:"text"}},[e._v("Title:")]),e._v(" "),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-100 px-2",attrs:{name:"title",type:"email"},model:{value:e.emailTitle,callback:function(t){e.emailTitle=t},expression:"emailTitle"}}),e._v(" "),e.errors.has("title")?s("p",{staticClass:"invalid-message mb-0 pt-2"},[e._v("\n                                                                    "+e._s(e.errors.first("title"))+"\n                                                                ")]):e._e()],1)],1),e._v(" "),s("b-col",{staticClass:"mt-5",attrs:{cols:"12"}},[s("b-form-group",[s("label",{staticClass:"mb-0 w-100",attrs:{for:"text"}},[e._v("Email:")]),e._v(" "),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-100 px-2",attrs:{name:"email",type:"email"},model:{value:e.receiverEmail,callback:function(t){e.receiverEmail=t},expression:"receiverEmail"}}),e._v(" "),e.errors.has("email")?s("p",{staticClass:"invalid-message mb-0 pt-2"},[e._v("\n                                                                    "+e._s(e.errors.first("email"))+"\n                                                                ")]):e._e()],1)],1)],1)],1)],1)]):e._e()]):e._e(),e._v(" "),s("b-form",{directives:[{name:"show",rawName:"v-show",value:2==e.customTabs,expression:"customTabs==2"}]},[s("p",[e._v("User specific settings")])]),e._v(" "),s("b-form",{directives:[{name:"show",rawName:"v-show",value:3==e.customTabs,expression:"customTabs==3"}]},[s("p",[e._v("Company Specific Dashboard")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:4==e.customTabs,expression:"customTabs==4"}],staticClass:"table-responsive mb-0"},[s("b-table-simple",{staticClass:"custom-table"},[s("b-thead",[s("b-tr",[s("b-th",[e._v("Id")]),e._v(" "),s("b-th",[e._v("Key")]),e._v(" "),s("b-th",[e._v("Value")]),e._v(" "),s("b-th",{staticClass:"action"},[e._v("Actions")])],1)],1),e._v(" "),s("b-tbody",e._l(e.settingsData,(function(t,a){return s("b-tr",{key:"setIndex_"+a},[s("b-td",[e._v(e._s(a+1))]),e._v(" "),s("b-td",[e._v(e._s(t.setting_key))]),e._v(" "),s("b-td",[e._v("\n                                                        "+e._s(t.setting_value.length>50?t.setting_value.substring(0,50)+" ...":t.setting_value)+"\n                                                        \n                                                    ")]),e._v(" "),s("b-td",{staticClass:"action two-content"},[s("ul",{staticClass:"list-unstyled m-0"},[s("li",{staticClass:"d-inline-block"},[s("a",{staticClass:"edit",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.showModel(t.id,a,t.setting_key,t.setting_value)}}},[s("i",{staticClass:"material-icons"},[e._v("edit")])])]),e._v(" "),s("li",{staticClass:"d-inline-block"},[s("a",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"#aaa",startingOpacity:.9,easing:"ease-in"},expression:"{color: '#aaa', startingOpacity: 0.9, easing: 'ease-in'}"}],staticClass:"view",attrs:{target:"_blank",href:"admin/view/settings/"+t.setting_key},on:{click:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"preview",void 0,s.key,void 0)?null:e.showPreviewModel(t.id,a,t.setting_key,t.setting_value)}}},[s("i",{staticClass:"material-icons"},[e._v("visibility")])])])])])],1)})),1)],1)],1)],1)]),e._v(" "),1.2==e.customTabs?s("div",{staticClass:"card-footer text-lg-right text-md-right text-sm-right text-left py-0 px-0 bg-transparent border-0 mb-4 multiple-btn"},[s("button",{staticClass:"btn btn-theme",attrs:{disabled:e.sendEmailModel},on:{click:function(t){return t.preventDefault(),e.sendEmail()}}},[e.sendEmailModel?s("b-spinner",{attrs:{label:"Spinning"}}):e._e(),e._v(" \n                                    Send Email\n                                ")],1)]):e._e()])],1)],1)],1)]),e._v(" "),s("b-modal",{ref:"my-modal",attrs:{id:"edit_list",size:"lg",centered:"","modal-class":"basic-modal px-0 no-footer no-header","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h4",{staticClass:"m-0 font-weight-bold pl-lg-3 pl-md-3 pl-sm-3 pl-0"},[e._v("Edit Setting")]),e._v(" "),s("button",{staticClass:"btn shadow-none d-flex p-0",on:{click:e.hideModal}},[s("i",{staticClass:"material-icons"},[e._v("close")])])]},proxy:!0}])},[e._v(" "),s("b-form",{staticClass:"row m-0"},[s("div",{staticClass:"modal-body-wrapper"},[s("div",{staticClass:"col-12 pr-lg-0 pr-md-0 pr-sm-0 key-wrapper pb-3"},[s("div",{staticClass:"key-header d-flex flex-wrap align-items-center"},[s("span",{staticClass:"material-icons mr-2"},[e._v("\n                            vpn_key\n                        ")]),e._v(" "),s("h6",{staticClass:"mb-0 d-inline-block"},[e._v(e._s(e.editerKey))])]),e._v(" "),s("div",{staticClass:"key-body d-flex flex-wrap"},[s("span",{staticClass:"d-iline-block"},[e._v("Value:")]),e._v(" "),s("div",{staticClass:"textual-area"},[s("v-md-editor",{attrs:{height:"400px"},model:{value:e.editerText,callback:function(t){e.editerText=t},expression:"editerText"}})],1)])])]),e._v(" "),s("div",{staticClass:"footer-btn text-right py-2 border-top w-100"},[s("button",{staticClass:"btn btn-theme no-focus text-uppercase",on:{click:function(t){return t.preventDefault(),e.adminUpdateSetting(t)}}},[e._v("Submit")])])])],1),e._v(" "),s("b-modal",{ref:"my-preview-modal",attrs:{id:"view_page",size:"lg",centered:"","modal-class":"basic-modal px-0 no-footer no-header","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h4",{staticClass:"m-0 font-weight-bold pl-lg-3 pl-md-3 pl-sm-3 pl-0"},[e._v("Preview")]),e._v(" "),s("button",{staticClass:"btn shadow-none d-flex p-0",on:{click:e.hideModal}},[s("i",{staticClass:"material-icons"},[e._v("close")])])]},proxy:!0}])},[e._v(" "),s("b-form",{staticClass:"row m-0"},[s("div",{staticClass:"modal-body-wrapper"},[s("div",{staticClass:"col-12 pr-lg-0 pr-md-0 pr-sm-0 key-wrapper pb-3"},[s("div",{staticClass:"key-body d-flex flex-wrap align-items-center"},[s("div",{staticClass:"textual-area"},[s("p",{domProps:{innerHTML:e._s(e.editerText)}})])])])])])],1),e._v(" "),e.showGrowlMessage?s("growl-message-component",{attrs:{firstMessage:e.growlMessagefirst,secondMessage:e.growlMessageSecond,messageType:e.growlMessageType}}):e._e()],1)}),[],!1,null,null,null);t.default=u.exports},Mh8x:function(e,t,s){"use strict";s("mlHO")},mlHO:function(e,t,s){var a=s("9r5n");"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,i);a.locals&&(e.exports=a.locals)}}]);